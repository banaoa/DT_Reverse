!function(){function a(a,b,c){return c=c||{},prompt("nuva:exec",JSON.stringify({"interface":a,api:b,args:c}))}function b(a){var b=c("exec");for(var e in a){var f=a[e];!function(a,c){d(a,function(d,e,f){var g={};g._name=a;for(var h in c){var i=c[h];g[i]=function(c){return function(d){d||(d={});var e=d.onSuccess,f=d.onFail;delete d.onSuccess,delete d.onFail,delete d.onCancel;var g=d;return b(a,c,g,e,f)}}(i)}f.exports=g})}(e,f)}}if(!window.nuva){var c,d;!function(){function a(a){var b=a.factory;return a.exports={},delete a.factory,b(c,a.exports,a),a.exports}var b={},e=[],f={};c=function(c){if(!b[c])throw"module "+c+" not found";if(c in f){var d=e.slice(f[c]).join("->")+"->"+c;throw"Cycle in require graph: "+d}if(b[c].factory)try{return f[c]=e.length,e.push(c),a(b[c])}finally{delete f[c],e.pop()}return b[c].exports},d=function(a,c){if(b[a])throw"module "+a+" already defined";b[a]={id:a,factory:c}},d.remove=function(a){delete b[a]}}(),d("callback",function(a,b,c){var d="1",e="2",f=0,g={},h={register:function(a){return f++,g[f]=a,f},dispatch:function(a,b){var c=g[a];if(c&&(b&&b.__keep__||delete g[a],b&&b.__status__)){var f=b.__status__,h=b.__message__;d===f&&c.win?c.win.call(c.context,h):e===f&&c.fail&&c.fail.call(c.context,h)}}};c.exports=h}),d("exec",function(a,b,c){function d(a,b,c,d,e){if(!a||"string"!=typeof a||!b||"string"!=typeof b)throw"Invalid args for exec(): plugin and action must be non-null strings";if(c){if("object"!=typeof c)throw"Invalid args for exec(): args must be an object";if(d){if("function"!=typeof d)throw"Invalid args for exec(): onSuccess must be a function";if(e&&"function"!=typeof e)throw"Invalid args for exec(): onFail must be a function"}}}var e=a("callback"),f=function(a,b,c,f,g,h){if(a&&"function"==typeof a&&b&&"function"==typeof b){var i=a,j=b;a=c,b=f,c=g,f=i,g=j}a&&"string"==typeof a&&b&&"string"==typeof b&&c&&"function"==typeof c&&(h=g,g=f,f=c,c={}),d(a,b,c,f,g);var k=a+"."+b,l=JSON.stringify(c),m=e.register({win:f,fail:g,context:h});window.WebViewJavascriptBridge.callHandler(k,l,m)};c.exports=f}),d("event",function(a,b,c){function d(a,b){this.defaultAction=b,this.cancelable=void 0!==a?a:!1,this.handlers=[]}function e(a){this.name=a,this.fired=!1,this.message=null,this.handlers=[]}var f={},g={},h=document.addEventListener,i=document.removeEventListener;f.resume=new d,f.pause=new d,f.online=new d,f.offline=new d,f.backbutton=new d(!0,function(){a("biz.navigation").goBack()}),f.pullToRefresh=new d(!0,function(){a("biz.navigation").reload()}),f.message=new d(!0,function(b){if(b&&b.detail&&b.detail._mid){var c=a("runtime.message");c&&c._consume&&c._consume({mid:b.detail._mid})}}),f.recycle=new d,f.restore=new d,f.drawer=new d,f.tab=new d,f.navHelpIcon=new d,f.navRightButton=new d,f.navMenu=new d,f.navTitle=new d,f.appLinkResponse=new d,f.internalPageLinkResponse=new d,f.networkEvent=new d,f.hostTaskEvent=new d,f.deviceOrientationChanged=new d,f.autoCheckIn=new d,f.deviceFound=new d,f.hostCheckIn=new d,f.screenshot=new d,document.addEventListener=function(b,c,d){f.hasOwnProperty(b)?(f[b].handlers.push(c),"backbutton"===b&&a("nuva").runtime._interceptBackButton(),"message"===b&&setTimeout(function(){var b=a("runtime.message");b&&b._register&&b._register({})},500)):h.call(document,b,c,d)},document.removeEventListener=function(a,b,c){if(f.hasOwnProperty(a)){var d=(f[a].handlers,[]);f[a].handlers.forEach(function(a){a!==b&&d.push(a)}),f[a].handlers=d}else i.call(document,a,b,c)};var j={dispatch:function(a,b){var c=f[a],d=c.handlers;d&&d.forEach(function(d){var e=document.createEvent("Events");e.initEvent(a,!1,!0),e.detail=b;var g=e.preventDefault;if(e._nativeDefaultPrevented=!1,e.preventDefault=function(){g.call(this),this._nativeDefaultPrevented=!0},d.call(document,e),!c.cancelable||!e._nativeDefaultPrevented){var h=f[a].defaultAction;void 0!==h&&h.call(window,e)}})},_publish:function(a,b){g[a]||(g[a]=new e(a));var c=g[a];c.fired=!0;var d=c.handlers;if(d)for(var f=0;f<d.length;f++)d[f](b)},_subscribe:function(a,b){g[a]||(g[a]=new e(a));var c=g[a];c.fired?b(c.message):c.handlers.push(b)},_subscribeOnce:function(b,c){var d=a("event");d._subscribe(b,function(a){d._unsubscribe(b,c),c(a)})},_unsubscribe:function(a,b){if(g[a]){var c=g[a].handlers,d=[];for(var e in c)c[e]!==b&&d.push(c[e]);g[a].handlers=d}}};c.exports=j}),d("nuva",function(a,b,c){function e(a){return function(b){g("runtime",a,{},b)}}var f=a("callback"),g=a("exec"),h=a("event"),i={isReady:!1,define:d,require:function(b){return b?a(b):g},callback:f,event:h,__js_port__:function(b){var c=Array.prototype.slice.call(arguments,1),d=a("nuva"),e=0,g=1;switch(b){case e:f.dispatch.apply(d,c);break;case g:h.dispatch.apply(d,c)}},runtime:{info:e("info"),_interceptBackButton:e("interceptBackButton"),_getModules:e("getModules")}};c.exports=i}),d("performance",function(a,b,c){c.exports={report:function(){if(window.performance){var a=window.nuva.require("runtime.monitor");if(a){if(window.performance.timing)try{a.timing({data:JSON.stringify(window.performance.timing)})}catch(b){console.log(b)}if(window.performance.memory)try{var c=window.performance.memory;a.memory({data:JSON.stringify({totalJSHeapSize:c.totalJSHeapSize,jsHeapSizeLimit:c.jsHeapSizeLimit,usedJSHeapSize:c.usedJSHeapSize})})}catch(b){console.log(b)}if(window.performance.getEntriesByType)try{var d=performance.getEntriesByType("resource");a.entries({type:"resource",data:d})}catch(b){console.log(b)}}}}}});var e=c("event");window.WebViewJavascriptBridge={callHandler:function(b,c,d){return-1===b.lastIndexOf(".")&&(b="legacy."+b),a("WebViewJavascriptBridge","callHandler",{api:b||"",jsonArgs:c||{},callbackId:d||""})}},window.dingtalk={getAccount:function(b){return a("dingtalk","getAccount",{key:b})},setAccount:function(b,c){return a("dingtalk","setAccount",{key:b,json:c})}},e._publish("nativeready"),function(){var b={reportPageBlank:function(b,c,d){a("statistics","reportPageSuccess",{url:b,isBlank:c,html:c?d:""})}},c=function(){var a;try{a=document.getElementsByTagName("html")[0].innerHTML}catch(c){a=c+""}b.reportPageBlank(location.href,!0,a)},d=function(){var a=document&&document.documentElement;if(a&&!window.__dd_check_done__){window.__dd_check_done__=!0;var d={elementsLength:0},e={elementsLength:0};setTimeout(function(){d.elementsLength=document.body.getElementsByTagName("*").length,setTimeout(function(){e.elementsLength=document.body.getElementsByTagName("*").length,0===e.elementsLength?c():location.hostname.indexOf(".dingtalk.com")>-1&&e.elementsLength<=4&&e.elementsLength==d.elementsLength?c():b.reportPageBlank(location.href,!1)},4e3)},500)}};d()}(),function(){window.nuva=c("nuva");var a=c("event");a._subscribeOnce("nativeready",function(){nuva.runtime._getModules(function(a){a.result&&(a=a.result),b(a),document.addEventListener("online",function(a){window.navigator.online=!0}),document.addEventListener("offline",function(a){window.navigator.online=!1});var d=c("device.network");d&&d.get({onSuccess:function(a){window.navigator.online=a.online}}),window._WebViewJavascriptBridge&&(window.WebViewJavascriptBridge=window._WebViewJavascriptBridge),window.nuva.isReady=!0;var e=document.createEvent("Events");e.initEvent("runtimeready",!1,!0),document.dispatchEvent(e);var f=document.createEvent("Events");f.initEvent("WebViewJavascriptBridgeReady"),document.dispatchEvent(f);var g=c("performance");g.report()})})}()}}();